<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Modern Video Call Widget</title>
    <link rel="stylesheet" href="videoCallWidget2.css">
    <script src="videoCallWidget2.js"></script>
</head>
<body>
    <div class="container">
        <h1>Video Call Widget</h1>
        
        <div class="room-setup">
            <label for="roomId">Enter Room ID:</label>
            <input type="text" id="roomId" placeholder="Example: room123">
            <button onclick="startCall()">
                <span>Start Video Call</span>
                <span>üìπ</span>
            </button>
        </div>
        
        <div class="instructions">
            <p>Enter a room ID above to start a video call. Share this room ID with others so they can join the same call.</p>
            <p>When you start the call, you'll need to allow camera and microphone access in your browser.</p>
        </div>
        
        <div class="features">
            <h2>Features</h2>
            <div class="feature-grid">
                <div class="feature">
                    <div class="feature-icon">üìπ</div>
                    <div class="feature-title">Video Toggle</div>
                    <div class="feature-desc">Turn your camera on/off</div>
                </div>
                <div class="feature">
                    <div class="feature-icon">üé§</div>
                    <div class="feature-title">Audio Toggle</div>
                    <div class="feature-desc">Mute/unmute your microphone</div>
                </div>
                <div class="feature">
                    <div class="feature-icon">üñ•Ô∏è</div>
                    <div class="feature-title">Screen Sharing</div>
                    <div class="feature-desc">Share your screen with others</div>
                </div>
                <div class="feature">
                    <div class="feature-icon">üí¨</div>
                    <div class="feature-title">Text Chat</div>
                    <div class="feature-desc">Send messages during the call</div>
                </div>
                <div class="feature">
                    <div class="feature-icon">üìé</div>
                    <div class="feature-title">File Sharing</div>
                    <div class="feature-desc">Send files to participants</div>
                </div>
                <div class="feature">
                    <div class="feature-icon">üë•</div>
                    <div class="feature-title">Multiple Users</div>
                    <div class="feature-desc">Group video calls</div>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        function startCall() {
            const roomId = document.getElementById('roomId').value.trim();
            if (!roomId) {
                alert("Please enter a Room ID!");
                return;
            }

            // Simulating JWT Authentication (In production, get a real JWT from your server)
            const authToken = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MTIzNCwidXNlcm5hbWUiOiJ0ZXN0VXNlciIsImFjbCI6InB1YmxpY0FjY2VzcyIsImlhdCI6MTc0MjM4MjU2OCwiZXhwIjoxNzczOTE4NTY4fQ.COzVaL0hBQJYVtroQqnuuVo7rIi0P0nnue2ZG3ES8x4";

            // Initialize the Video Call Widget
            new VideoCallWidget({
                websocketUrl: 'ws://localhost:4000', // Replace with your WebSocket server URL
                roomId: roomId,
                authToken: authToken
            });
            
            // Add notification that call has started
            const container = document.querySelector('.container');
            const notification = document.createElement('div');
            notification.style.backgroundColor = '#4a69bd';
            notification.style.color = 'white';
            notification.style.padding = '10px';
            notification.style.borderRadius = '6px';
            notification.style.marginTop = '20px';
            notification.style.textAlign = 'center';
            notification.innerHTML = `<strong>Call started in room: ${roomId}</strong><br>The video call widget has been opened in the bottom right corner.`;
            container.appendChild(notification);
        }
    </script>
</body>
</html>